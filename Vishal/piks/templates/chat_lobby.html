
 {% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2>Hello, <span class="text-primary">{{ request.session.user_name }}</span> ðŸ‘‹</h2>
                <a href="{% url 'set_name' %}" class="btn btn-sm btn-outline-secondary">Change My Name</a>
            </div>
            
            <h5 class="text-muted mb-3">Kisse chat karna chahte hain? Click karein:</h5>
<div class="list-group shadow-sm">
    {% for item in user_data %}
    <a href="{% url 'personal_chat' item.info.name %}" 
       class="list-group-item list-group-item-action d-flex justify-content-between align-items-center py-3">
        <div>
            <strong class="h5 mb-0">{{ item.info.name }}</strong>
            {% if item.unread > 0 %}
                <span class="badge bg-danger rounded-pill ms-2">{{ item.unread }}</span>
            {% endif %}
            <br><small class="text-muted">Roll No: {{ item.info.roll }}</small>
        </div>
        
        <div class="text-end">
            {% if item.unread > 0 %}
                <div class="spinner-grow spinner-grow-sm text-danger" role="status"></div>
            {% endif %}
            <span class="badge bg-success rounded-pill d-block mt-1">Online</span>
        </div>
    </a>
    {% endfor %}
</div>

        </div>
    </div>
</div>
{% endblock %}
